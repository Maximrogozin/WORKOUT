{"ast":null,"code":"import { createSlice } from \"@reduxjs/toolkit\";\n// import localStorageService from \"../services/localStorage.service\";\nimport catalogService from \"../services/catalog.service\";\n\n// const initialState = localStorageService.getAccessToken()\n//   ? {\n//       entities: null,\n//       isLoading: true,\n//       error: null,\n//       auth: { userId: localStorageService.getUserId() },\n//       isLoggedIn: true,\n//       dataLoaded: false,\n//     }\n//   : {\n//       entities: null,\n//       isLoading: false,\n//       error: null,\n//       auth: null,\n//       isLoggedIn: false,\n//       dataLoaded: false,\n//     };\n\nconst catalogsSlice = createSlice({\n  name: \"catalogs\",\n  initialState: {\n    entities: null,\n    isLoading: true,\n    error: null\n  },\n  reducers: {\n    catalogsRequested: state => {\n      state.isLoading = true;\n    },\n    catalogsReceived: (state, action) => {\n      state.entities = action.payload;\n      state.isLoading = false;\n    },\n    catalogsRequestFailed: (state, action) => {\n      state.error = action.payload;\n      state.isLoading = false;\n    },\n    incrementProductCount: (state, action) => {\n      const {\n        payload: productId\n      } = action;\n      const product = state.entities.find(entity => entity._id === productId);\n      if (product) {\n        product.count += 1;\n      }\n    },\n    decrementProductCount: (state, action) => {\n      const {\n        payload: productId\n      } = action;\n      const product = state.entities.find(entity => entity._id === productId);\n      if (product) {\n        product.count -= 1;\n      }\n    }\n  }\n});\nconst {\n  reducer: catalogsReducer,\n  actions\n} = catalogsSlice;\nconst {\n  catalogsRequested,\n  catalogsReceived,\n  catalogsRequestFailed,\n  incrementProductCount\n} = actions;\nexport const loadCatalogsList = () => async dispatch => {\n  dispatch(catalogsRequested());\n  try {\n    const {\n      content\n    } = await catalogService.get();\n    dispatch(catalogsReceived(content));\n  } catch (error) {\n    dispatch(catalogsRequestFailed(error.message));\n  }\n};\nexport const incrementCount = productId => dispatch => {\n  dispatch(incrementProductCount(productId));\n};\nexport const getCatalogsList = () => state => state.catalogs.entities;\nexport const getCatalogsLoadingStatus = () => state => state.catalogs.isLoading;\nexport const getCatalogsById = productId => state => {\n  if (state.catalogs.entities) {\n    return state.catalogs.entities.find(entity => entity._id === productId);\n  }\n};\nexport const getBasket = () => state => {\n  if (state.catalogs.entities) {\n    return state.catalogs.entities.filter(entity => entity.count !== 0);\n  }\n};\nexport default catalogsReducer;","map":{"version":3,"names":["createSlice","catalogService","catalogsSlice","name","initialState","entities","isLoading","error","reducers","catalogsRequested","state","catalogsReceived","action","payload","catalogsRequestFailed","incrementProductCount","productId","product","find","entity","_id","count","decrementProductCount","reducer","catalogsReducer","actions","loadCatalogsList","dispatch","content","get","message","incrementCount","getCatalogsList","catalogs","getCatalogsLoadingStatus","getCatalogsById","getBasket","filter"],"sources":["/Users/maksimrogozin/Documents/VScode/workout_diplom/WORKOUT/client/src/app/store/catalog.js"],"sourcesContent":["import { createSlice } from \"@reduxjs/toolkit\";\n// import localStorageService from \"../services/localStorage.service\";\nimport catalogService from \"../services/catalog.service\";\n\n// const initialState = localStorageService.getAccessToken()\n//   ? {\n//       entities: null,\n//       isLoading: true,\n//       error: null,\n//       auth: { userId: localStorageService.getUserId() },\n//       isLoggedIn: true,\n//       dataLoaded: false,\n//     }\n//   : {\n//       entities: null,\n//       isLoading: false,\n//       error: null,\n//       auth: null,\n//       isLoggedIn: false,\n//       dataLoaded: false,\n//     };\n\nconst catalogsSlice = createSlice({\n  name: \"catalogs\",\n  initialState: {\n    entities: null,\n    isLoading: true,\n    error: null,\n  },\n  reducers: {\n    catalogsRequested: (state) => {\n      state.isLoading = true;\n    },\n    catalogsReceived: (state, action) => {\n      state.entities = action.payload;\n      state.isLoading = false;\n    },\n    catalogsRequestFailed: (state, action) => {\n      state.error = action.payload;\n      state.isLoading = false;\n    },\n    incrementProductCount: (state, action) => {\n      const { payload: productId } = action;\n      const product = state.entities.find((entity) => entity._id === productId);\n      if (product) {\n        product.count += 1;\n      }\n    },\n    decrementProductCount: (state, action) => {\n      const { payload: productId } = action;\n      const product = state.entities.find((entity) => entity._id === productId);\n      if (product) {\n        product.count -= 1;\n      }\n    },\n  },\n});\n\nconst { reducer: catalogsReducer, actions } = catalogsSlice;\nconst {\n  catalogsRequested,\n  catalogsReceived,\n  catalogsRequestFailed,\n  incrementProductCount,\n} = actions;\n\nexport const loadCatalogsList = () => async (dispatch) => {\n  dispatch(catalogsRequested());\n  try {\n    const { content } = await catalogService.get();\n    dispatch(catalogsReceived(content));\n  } catch (error) {\n    dispatch(catalogsRequestFailed(error.message));\n  }\n};\n\nexport const incrementCount = (productId) => (dispatch) => {\n  dispatch(incrementProductCount(productId));\n};\n\nexport const getCatalogsList = () => (state) => state.catalogs.entities;\nexport const getCatalogsLoadingStatus = () => (state) =>\n  state.catalogs.isLoading;\n\nexport const getCatalogsById = (productId) => (state) => {\n  if (state.catalogs.entities) {\n    return state.catalogs.entities.find((entity) => entity._id === productId);\n  }\n};\n\nexport const getBasket = () => (state) => {\n  if (state.catalogs.entities) {\n    return state.catalogs.entities.filter((entity) => entity.count !== 0);\n  }\n};\n\nexport default catalogsReducer;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}